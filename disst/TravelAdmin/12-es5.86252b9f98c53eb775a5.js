!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{gecV:function(t,a,i){"use strict";i.r(a),i.d(a,"BookingsModule",(function(){return J}));var o,r=i("ofXK"),l=i("tyNb"),d=i("mrSG"),m=i("aceb"),s=i("fXoL"),c=((o=function(){function t(){e(this,t),this.formData={}}return n(t,[{key:"setFormData",value:function(e){this.formData=e,console.log(this.getFormData())}},{key:"getFormData",value:function(){return this.formData}},{key:"currencyConverter",value:function(e){return"---"==e?"----":new Intl.NumberFormat("en-US",{style:"decimal",currency:"CFA",minimumFractionDigits:0}).format(e).split(",").join(" ")}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275prov=s["\u0275\u0275defineInjectable"]({token:o,factory:o.\u0275fac,providedIn:"root"}),o),u=i("AytR"),p=i("sAl5");function g(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item"),s["\u0275\u0275elementStart"](1,"div",3),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Email"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275elementStart"](5,"a",5),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275propertyInterpolate1"]("href","mailto:",n.dialogData.bookings_email,"",s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.dialogData.bookings_email," ")}}function v(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",2),s["\u0275\u0275elementStart"](1,"h2",7),s["\u0275\u0275text"](2,"Return trip"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"h6"),s["\u0275\u0275text"](5,"Travelling Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",4),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](7),s["\u0275\u0275textInterpolate1"](" ",n.dialogData.bookings_travel_return_date," ")}}function f(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",2),s["\u0275\u0275elementStart"](1,"div",3),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Company Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275text"](5),s["\u0275\u0275element"](6,"img",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",n.dialogData.vehicles_vehicle_name_round," "),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("alt",n.dialogData.vehicles_vehicle_name_round)("src",n.base_url+"AppServer/newrestapi/application/uploads/images/"+n.dialogData.vehicles_vehicle_logo_round,s["\u0275\u0275sanitizeUrl"])}}function b(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",2),s["\u0275\u0275elementStart"](1,"div",3),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Class"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",n.dialogData.class_name_round," ")}}function h(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",2),s["\u0275\u0275elementStart"](1,"div",3),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Departure Time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",n.AMPMConverter(n.dialogData.routes_departure_time_round,"noneed")," ")}}function _(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",2),s["\u0275\u0275elementStart"](1,"div",3),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Arrival Time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",n.AMPMConverter(n.dialogData.routes_arriving_time_round,"noneed")," ")}}function S(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",2),s["\u0275\u0275elementStart"](1,"div",3),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Ticket Amount"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275elementStart"](5,"div",12),s["\u0275\u0275elementStart"](6,"div",13),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",14),s["\u0275\u0275text"](9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",12),s["\u0275\u0275elementStart"](11,"div",13),s["\u0275\u0275text"](12," Commission Amount "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",14),s["\u0275\u0275text"](14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",12),s["\u0275\u0275elementStart"](16,"div",13),s["\u0275\u0275text"](17," Total "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",14),s["\u0275\u0275text"](19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](7),s["\u0275\u0275textInterpolate1"]("Tickets (",n.passengerConverter(),")"),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("",n.currencyConverter(n.dialogData.bookings_amount)," Fcfa"),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",n.currencyConverter(n.dialogData.bookings_amount_commission)," Fcfa "),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",n.currencyConverter(n.dialogData.bookings_amount-0+(n.dialogData.bookings_amount_commission-0))," Fcfa ")}}function y(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item"),s["\u0275\u0275elementStart"](1,"div",3),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Payment Response"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275elementStart"](5,"code"),s["\u0275\u0275elementStart"](6,"pre"),s["\u0275\u0275text"](7),s["\u0275\u0275pipe"](8,"json"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](7),s["\u0275\u0275textInterpolate1"]("              ",s["\u0275\u0275pipeBind1"](8,1,n.seperateStringintoJson(n.dialogData.webhook_response)),"\n            ")}}var x,E=((x=function(){function t(n,a,i,o,r){e(this,t),this.windowRef=a,this.formService=i,this.common=o,this.bookingService=r,this.base_url=u.a.base_url,this.round_trip=!1,this.dialogData=n.data,this.dialogAction=n.action}return n(t,[{key:"AMPMConverter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split(":"),a=n[0],i=n[1],o=" AM";return a>12&&(a-=12,o=" PM"),""==t?"<b>"+a+":"+i+"<span>"+o+"</span></b>":a+":"+i+o}},{key:"closeWindow",value:function(){this.windowRef.close()}},{key:"currencyConverter",value:function(e){return this.bookingService.currencyConverter(e)}},{key:"ngOnInit",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.dialogData),this.round_trip=null!=this.dialogData.class_name_round&&""!=this.dialogData.class_name_round;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"seperateStringintoJson",value:function(e){return JSON.parse(e)}},{key:"timeStamptoDate",value:function(e){return new Date(1e3*e)}},{key:"passengerConverter",value:function(){if(null!=this.dialogData){var e=null==this.dialogData.class_name?"single":"round",t="single"==e?this.dialogData.routes_adult_price:this.dialogData.routes_adult_round_price,n="single"==e?this.dialogData.routes_infant_price:this.dialogData.routes_infant_round_price;return 1==this.dialogData.bookings_adult_count&&0==this.dialogData.bookings_infant_count?"1 Adult x "+t:this.dialogData.bookings_adult_count>1&&0==this.dialogData.bookings_infant_count?this.dialogData.bookings_adult_count+" Adults x "+t:0==this.dialogData.bookings_adult_count&&1==this.dialogData.bookings_infant_count?"1 Kid x "+n:0==this.dialogData.bookings_adult_count&&this.dialogData.bookings_infant_count>1?this.dialogData.bookings_adult_count+" Kids x "+n:this.dialogData.bookings_adult_count+" Adults x "+t+", "+this.dialogData.bookings_adult_count+" Kids x "+n}}}]),t}()).\u0275fac=function(e){return new(e||x)(s["\u0275\u0275directiveInject"](m.g),s["\u0275\u0275directiveInject"](m.wb),s["\u0275\u0275directiveInject"](c),s["\u0275\u0275directiveInject"](p.a),s["\u0275\u0275directiveInject"](c))},x.\u0275cmp=s["\u0275\u0275defineComponent"]({type:x,selectors:[["ngx-bookings-form"]],decls:79,vars:27,consts:[["accent","info"],[1,"dialog-list"],[1,"row"],[1,"title","col-4"],[1,"content","col-8"],[1,"color-unset",3,"href"],[4,"ngIf"],[1,"heading-trip"],[1,"pl-3","max-height-100",3,"alt","src"],["class","row",4,"ngIf"],["target","_blank",3,"href"],[1,"fa","fa-file-pdf","pdf-icon"],[1,"row","my-1"],[1,"col-7"],[1,"col-5"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body"),s["\u0275\u0275elementStart"](4,"nb-list",1),s["\u0275\u0275elementStart"](5,"nb-list-item",2),s["\u0275\u0275elementStart"](6,"div",3),s["\u0275\u0275elementStart"](7,"h6"),s["\u0275\u0275text"](8,"Passengers"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",4),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"nb-list-item",2),s["\u0275\u0275elementStart"](12,"div",3),s["\u0275\u0275elementStart"](13,"h6"),s["\u0275\u0275text"](14,"Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"div",4),s["\u0275\u0275text"](16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"nb-list-item",2),s["\u0275\u0275elementStart"](18,"div",3),s["\u0275\u0275elementStart"](19,"h6"),s["\u0275\u0275text"](20,"Phone"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",4),s["\u0275\u0275elementStart"](22,"a",5),s["\u0275\u0275text"](23),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](24,g,7,2,"nb-list-item",6),s["\u0275\u0275elementStart"](25,"nb-list-item",2),s["\u0275\u0275elementStart"](26,"h2",7),s["\u0275\u0275text"](27,"Outgoing trip"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](28,"div",3),s["\u0275\u0275elementStart"](29,"h6"),s["\u0275\u0275text"](30,"Travelling Date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](31,"div",4),s["\u0275\u0275text"](32),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"nb-list-item",2),s["\u0275\u0275elementStart"](34,"div",3),s["\u0275\u0275elementStart"](35,"h6"),s["\u0275\u0275text"](36,"Company Name"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](37,"div",4),s["\u0275\u0275text"](38),s["\u0275\u0275element"](39,"img",8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](40,"nb-list-item",2),s["\u0275\u0275elementStart"](41,"div",3),s["\u0275\u0275elementStart"](42,"h6"),s["\u0275\u0275text"](43,"Class"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](44,"div",4),s["\u0275\u0275text"](45),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](46,"nb-list-item",2),s["\u0275\u0275elementStart"](47,"div",3),s["\u0275\u0275elementStart"](48,"h6"),s["\u0275\u0275text"](49,"Departure Time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](50,"div",4),s["\u0275\u0275text"](51),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](52,"nb-list-item",2),s["\u0275\u0275elementStart"](53,"div",3),s["\u0275\u0275elementStart"](54,"h6"),s["\u0275\u0275text"](55,"Arrival Time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](56,"div",4),s["\u0275\u0275text"](57),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](58,v,8,1,"nb-list-item",9),s["\u0275\u0275template"](59,f,7,3,"nb-list-item",9),s["\u0275\u0275template"](60,b,6,1,"nb-list-item",9),s["\u0275\u0275template"](61,h,6,1,"nb-list-item",9),s["\u0275\u0275template"](62,_,6,1,"nb-list-item",9),s["\u0275\u0275elementStart"](63,"nb-list-item",2),s["\u0275\u0275elementStart"](64,"div",3),s["\u0275\u0275elementStart"](65,"h6"),s["\u0275\u0275text"](66,"Ticket"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](67,"div",4),s["\u0275\u0275elementStart"](68,"a",10),s["\u0275\u0275element"](69,"i",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](70,S,20,4,"nb-list-item",9),s["\u0275\u0275template"](71,y,9,3,"nb-list-item",6),s["\u0275\u0275elementStart"](72,"nb-list-item",2),s["\u0275\u0275elementStart"](73,"div",3),s["\u0275\u0275elementStart"](74,"h6"),s["\u0275\u0275text"](75,"Booked time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](76,"div",4),s["\u0275\u0275text"](77),s["\u0275\u0275pipe"](78,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate3"]("",t.dialogData.bookings_starting_point," to ",t.dialogData.bookings_ending_point," (",null!=t.dialogData.routes_arriving_time_round?"Round Trip":"Single Trip",")"),s["\u0275\u0275advance"](8),s["\u0275\u0275textInterpolate1"](" (",(t.dialogData.bookings_adult_count>0?1==t.dialogData.bookings_adult_count?"1 Adult, ":t.dialogData.bookings_adult_count+" Adults, ":"")+(t.dialogData.bookings_infant_count>0?1==t.dialogData.bookings_infant_count?"1 Kid":t.dialogData.bookings_infant_count+" kids":""),") "),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"](" ",t.dialogData.bookings_username," "),s["\u0275\u0275advance"](6),s["\u0275\u0275propertyInterpolate1"]("href","tel:",t.dialogData.bookings_phone,"",s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](t.dialogData.bookings_phone),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.dialogData.bookings_email),s["\u0275\u0275advance"](8),s["\u0275\u0275textInterpolate1"](" ",t.dialogData.bookings_travel_date," "),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"](" ",t.dialogData.vehicles_vehicle_name," "),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("alt",t.dialogData.vehicles_vehicle_name)("src",t.base_url+"AppServer/newrestapi/application/uploads/images/"+t.dialogData.vehicles_vehicle_logo,s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"](" ",t.dialogData.class_name," "),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"](" ",t.AMPMConverter(t.dialogData.routes_departure_time,"noneed")," "),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"](" ",t.AMPMConverter(t.dialogData.routes_arriving_time,"noneed")," "),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.round_trip),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.round_trip),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.round_trip),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.round_trip),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.round_trip),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("href",t.base_url+"uploads/tickets/EasyTravel_"+t.dialogData.bookings_invoice_link,s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.dialogData.bookings_amount),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!1),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](78,24,t.timeStamptoDate(t.dialogData.bookings_time),"medium")," "))},directives:[m.s,m.u,m.r,m.R,m.S,r.NgIf],pipes:[r.DatePipe,r.JsonPipe],styles:["nb-list-item .title h6{font-weight:600;margin:unset}nb-list-item .content pre{background:#efeaea;display:block}nb-card-body{max-height:80vh;overflow:scroll;min-width:700px}.pdf-icon{font-size:3rem;background:#efeaea;padding:30px}.max-height-100{max-height:100px}.color-unset{color:unset!important}.dialog-list{overflow:unset!important}.heading-trip{min-width:100%;display:block;color:#0095ff!important;margin-bottom:23px;font-size:25px!important;background:#f1f1f1;padding:10px;border-top:2px solid}"],encapsulation:2}),x),k=i("PFrW"),D=i("jhN1");function w(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",3),s["\u0275\u0275elementStart"](1,"div",4),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"MTN Payment service is not available for now."),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())}function I(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",3),s["\u0275\u0275elementStart"](1,"div",5),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Payment Type"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",6),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",n.dialogDataPaymentType," ")}}function C(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",3),s["\u0275\u0275elementStart"](1,"div",5),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Amount"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",6),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",n.currencyConverter(n.dialogDataPayment.pay_amount)," Fcfa ")}}function P(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",3),s["\u0275\u0275elementStart"](1,"div",5),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Payment ID"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",6),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",n.dialogDataPayment.pay_transaction," ")}}function T(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",3),s["\u0275\u0275elementStart"](1,"div",5),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Receipt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",6),s["\u0275\u0275elementStart"](5,"a",7),s["\u0275\u0275text"](6,"Receipt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("href",n.dialogDataPayment.pay_receipt,s["\u0275\u0275sanitizeUrl"])}}function A(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",3),s["\u0275\u0275elementStart"](1,"div",5),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Payment Status"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",6),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",n.dialogDataPayment.pay_status," ")}}function R(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nb-list-item",3),s["\u0275\u0275elementStart"](1,"div",5),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3,"Payment time"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",6),s["\u0275\u0275text"](5),s["\u0275\u0275pipe"](6,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](6,1,n.timeStamptoDate(n.dialogDataPayment.pay_time),"medium")," ")}}var j,M,O,B,N=((j=function(){function t(n,a,i,o){e(this,t),this.windowRef=a,this.common=i,this.sanitizer=o,this.base_url=u.a.base_url,this.dialogDataPayment={},this.dialogData=n.data,this.dialogAction=n.action,this.sanitize=this.sanitizer}return n(t,[{key:"closeWindow",value:function(){this.windowRef.close()}},{key:"currencyConverter",value:function(e){return"---"==e?"----":new Intl.NumberFormat("en-US",{style:"decimal",currency:"CFA",minimumFractionDigits:0}).format(e).split(",").join(" ")}},{key:"ngOnInit",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.dialogDataPaymentType="card_payment"==this.dialogData.webhook_type?"Stripe":"MTN Pay","Stripe"==this.dialogDataPaymentType?(t=JSON.parse(this.dialogData.webhook_response),this.dialogDataPayment.pay_amount=t.amount,this.dialogDataPayment.pay_transaction=t.id,this.dialogDataPayment.pay_time=t.created,this.dialogDataPayment.pay_receipt=t.receipt_url,this.dialogDataPayment.pay_status=t.status,this.url=this.sanitizer.bypassSecurityTrustUrl(this.dialogDataPayment.pay_receipt),console.log(this.dialogDataPayment)):this.dialogDataPayment={};case 1:case"end":return e.stop()}}),e,this)})))}},{key:"seperateStringintoJson",value:function(e){return JSON.parse(e)}},{key:"timeStamptoDate",value:function(e){return new Date(1e3*e)}}]),t}()).\u0275fac=function(e){return new(e||j)(s["\u0275\u0275directiveInject"](m.g),s["\u0275\u0275directiveInject"](m.wb),s["\u0275\u0275directiveInject"](p.a),s["\u0275\u0275directiveInject"](D.b))},j.\u0275cmp=s["\u0275\u0275defineComponent"]({type:j,selectors:[["ngx-bookings-form"]],decls:12,vars:8,consts:[["accent","info"],[1,"dialog-list"],["class","row",4,"ngIf"],[1,"row"],[1,"title","col-10"],[1,"title","col-4"],[1,"content","col-8"],["target","_blank",1,"text-muted",3,"href"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card",0),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body"),s["\u0275\u0275elementStart"](4,"nb-list",1),s["\u0275\u0275template"](5,w,4,0,"nb-list-item",2),s["\u0275\u0275template"](6,I,6,1,"nb-list-item",2),s["\u0275\u0275template"](7,C,6,1,"nb-list-item",2),s["\u0275\u0275template"](8,P,6,1,"nb-list-item",2),s["\u0275\u0275template"](9,T,7,1,"nb-list-item",2),s["\u0275\u0275template"](10,A,6,1,"nb-list-item",2),s["\u0275\u0275template"](11,R,7,4,"nb-list-item",2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" Payment - ",t.dialogData.bookings_username,""),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf","Stripe"!=t.dialogDataPaymentType),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.dialogDataPaymentType),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.dialogDataPayment.pay_amount),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.dialogDataPayment.pay_transaction),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.dialogDataPayment.pay_receipt),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.dialogDataPayment.pay_status),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.dialogDataPayment.pay_time))},directives:[m.s,m.u,m.r,m.R,r.NgIf,m.S],pipes:[r.DatePipe],styles:["nb-list-item .title h6{font-weight:600;margin:unset}nb-list-item .content pre{background:#efeaea;display:block}nb-card-body{max-height:80vh;overflow:scroll;min-width:700px}.pdf-icon{font-size:3rem;background:#efeaea;padding:30px}.max-height-100{max-height:100px}.color-unset{color:unset!important}.dialog-list{overflow:unset!important}.heading-trip{min-width:100%;display:block;color:#0095ff!important;margin-bottom:23px;font-size:25px!important;background:#f1f1f1;padding:10px;border-top:2px solid}"],encapsulation:2}),j),F=i("RS3s"),z=[{path:":vehicle",component:(M=function(){function t(n,a,i,o,r,l){var d=this;e(this,t),this.windowService=n,this.formService=a,this.web=i,this.common=o,this.datePipe=r,this.activeRoute=l,this.base_url=u.a.base_url,this.tableAmount={},this.loading=!1,this.tableSettings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="fa fa-eye"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="fa fa-ticket-alt text-secondary"></i>'},actions:{columnTitle:"ACTIONS",add:!1,edit:!0,delete:!0,position:"right"},sort:!0,mode:"external",pager:{perPage:15},columns:{vehicles_vehicle_type:{title:"CATEGORY",type:"string",width:"20px"},vehicles_vehicle_name:{title:"TRANSPORTER",type:"string"},bookings_starting_point:{title:"FROM",type:"string"},bookings_ending_point:{title:"TO",type:"string"},bookings_travel_date:{title:"DATE",type:"html"},webhook_type:{title:"PAYMENT METHOD",type:"string",valuePrepareFunction:function(e){return"card_payment"==e?"CARD":"MTN PAY"}},bookings_amount:{title:"TICKET AMOUNT",type:"string",valuePrepareFunction:function(e){return d.currencyConverter(e)}},bookings_amount_commission:{title:"COMMISSIONS",type:"string",valuePrepareFunction:function(e){return d.currencyConverter(e)}}}}}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.activeRoute.paramMap.subscribe((function(t){console.log(t),t.has("vehicle")&&e.getPageData(t.params.vehicle)}))}},{key:"onCustomAction",value:function(e){console.log(e)}},{key:"selectRow",value:function(e){var t=this;this.windowService.open(E,{title:"View Bookings",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:e.data,action:"view"},windowClass:"formWindow"}).onClose.pipe().subscribe((function(e){console.log(e),t.ngOnInit()}))}},{key:"createRow",value:function(){}},{key:"currencyConverter",value:function(e){return this.formService.currencyConverter(e)}},{key:"deleteRow",value:function(e){this.windowService.open(N,{title:"View Payment",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:e.data,action:"payment"},windowClass:"formWindow"}).onClose.pipe().subscribe((function(e){console.log(e)}))}},{key:"editRow",value:function(e){var t=this;this.windowService.open(E,{title:"View Bookings",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:e.data,action:"view"},windowClass:"formWindow"}).onClose.pipe().subscribe((function(e){console.log(e),t.ngOnInit()}))}},{key:"getPageData",value:function(e){var t=this;this.loading=!0,this.web.getData("getBookingsInfo?vehicle="+e).then((function(e){t.loading=!1,"200"==e.status?(t.mappingTableData(e.data),t.tableAmount=e.amount):t.common.presentToast(e.error,"Error")}),(function(e){t.loading=!1,t.common.presentToast("Connection Error","Error")}))}},{key:"mappingTableData",value:function(e){var t=this;this.tableSource=e.filter((function(e){return null!=e.bookings_starting_point})),this.tableSource.map((function(e){var n=e.bookings_travel_date;if(n=t.datePipe.transform(n),e.bookings_travel_date=n,e.bookings_travel_return_date){var a=e.bookings_travel_return_date;a=t.datePipe.transform(a),e.bookings_travel_return_date=a}return e.vehicles_vehicle_type="flight"==e.vehicles_vehicle_type?"Airline":"bus"==e.vehicles_vehicle_type?"Bus":"Train",e.bookings_username=e.bookings_username||"----",e.bookings_passengers=t.passengerConverter({adults:e.bookings_adult_count,kids:e.bookings_infant_count}),e}))}},{key:"passengerConverter",value:function(e){return 1==e.adults&&0==e.kids?"1 Adult":e.adults>1&&0==e.kids?e.adults+" Adults":parseInt(e.adults)+parseInt(e.kids)+" Passengers"}}]),t}(),M.\u0275fac=function(e){return new(e||M)(s["\u0275\u0275directiveInject"](m.xb),s["\u0275\u0275directiveInject"](c),s["\u0275\u0275directiveInject"](k.a),s["\u0275\u0275directiveInject"](p.a),s["\u0275\u0275directiveInject"](r.DatePipe),s["\u0275\u0275directiveInject"](l.a))},M.\u0275cmp=s["\u0275\u0275defineComponent"]({type:M,selectors:[["ngx-bookings"]],decls:16,vars:8,consts:[[3,"settings","source","userRowSelect","create","edit","delete"],[1,"row"],[1,"col-4"],["status","primary","accent","info",3,"nbSpinner"],["status","warning","accent","info",3,"nbSpinner"],["status","success","accent","info",3,"nbSpinner"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"nb-card"),s["\u0275\u0275elementStart"](1,"nb-card-header"),s["\u0275\u0275text"](2," Manage Bookings "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"nb-card-body"),s["\u0275\u0275elementStart"](4,"ng2-smart-table",0),s["\u0275\u0275listener"]("userRowSelect",(function(e){return t.selectRow(e)}))("create",(function(){return t.createRow()}))("edit",(function(e){return t.editRow(e)}))("delete",(function(e){return t.deleteRow(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"nb-card-footer"),s["\u0275\u0275elementStart"](6,"div",1),s["\u0275\u0275elementStart"](7,"div",2),s["\u0275\u0275elementStart"](8,"nb-alert",3),s["\u0275\u0275text"](9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",2),s["\u0275\u0275elementStart"](11,"nb-alert",4),s["\u0275\u0275text"](12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",2),s["\u0275\u0275elementStart"](14,"nb-alert",5),s["\u0275\u0275text"](15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("settings",t.tableSettings)("source",t.tableSource),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("nbSpinner",t.loading),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("Total Tickets: ",t.currencyConverter(t.tableAmount.amount)," Fcfa "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("nbSpinner",t.loading),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("Total Commission: ",t.currencyConverter(t.tableAmount.commission)," Fcfa"),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("nbSpinner",t.loading),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("Total Sales: ",t.currencyConverter(t.tableAmount.amount-0+(t.tableAmount.commission-0))," Fcfa"))},directives:[m.s,m.u,m.r,F.a,m.t,m.k,m.kb],styles:[".nb-theme-default ng2-smart-table .ng2-smart-actions a.ng2-smart-action{font-size:1.3rem!important}.nb-theme-default nb-alert.accent-info{border-top:none}"],encapsulation:2}),M)}],U=((B=function t(){e(this,t)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:B}),B.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||B)},imports:[[l.g.forChild(z)],l.g]}),B),J=((O=function t(){e(this,t)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:O}),O.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||O)},providers:[c,r.DatePipe],imports:[[r.CommonModule,U,m.v,m.T,F.b,m.vb.forChild(),m.l,m.lb]]}),O)}}])}();