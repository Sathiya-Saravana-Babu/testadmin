(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{xMYf:function(e,t,n){"use strict";n.r(t),n.d(t,"CompaniesModule",(function(){return V}));var i=n("ofXK"),o=n("tyNb"),a=n("mrSG"),l=n("aceb"),s=n("sAl5"),r=n("fXoL");let c=(()=>{class e{constructor(e){this.common=e,this.formData={}}setFormData(e){this.formData=e,console.log(this.getFormData())}getFormData(){return this.formData}companiesFormValidation(e){return Object(a.a)(this,void 0,void 0,(function*(){let t=(e.selectedCountry||"")+e.vehicles_vehicle_phone;return console.log(t),null==e.vehicles_vehicle_name||""==e.vehicles_vehicle_name?(this.common.presentToast("Enter company name","Field is missing"),!1):null==e.vehicles_vehicle_email||""==e.vehicles_vehicle_email?(this.common.presentToast("Enter company email","Field is missing"),!1):0==(yield this.common.validateEmail(e.vehicles_vehicle_email))?(this.common.presentToast("Enter valid email address","Invalid address"),!1):null==t||""==t?(this.common.presentToast("Enter phone number","Field is missing"),!1):0==(yield this.common.validateMobileNumber(t))?(this.common.presentToast("Enter valid phone number","Invalid number"),!1):""==e.vehicles_vehicle_password||null==e.vehicles_vehicle_password?(this.common.presentToast("Please enter password","Field is missing"),!1):e.vehicles_vehicle_password.length<6?(this.common.presentToast("Password should have 6 or more characters."),!1):null!=e.vehicles_vehicle_logo&&""!=e.vehicles_vehicle_logo||(this.common.presentToast("Choose company logo","Field is missing"),!1)}))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](s.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=n("AytR"),m=n("PFrW"),h=n("Kyvb"),p=n.t(h,2),g=n("3Pt+");function u(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nb-list-item",6),r["\u0275\u0275elementStart"](1,"div",7),r["\u0275\u0275elementStart"](2,"h6"),r["\u0275\u0275text"](3,"Company Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",8),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",e.dialogData.vehicles_vehicle_name," ")}}function v(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nb-list-item",6),r["\u0275\u0275elementStart"](1,"div",7),r["\u0275\u0275elementStart"](2,"h6"),r["\u0275\u0275text"](3,"Image"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",8),r["\u0275\u0275element"](5,"img",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("src",e.base_url+"uploads/companies/"+e.dialogData.vehicles_vehicle_logo,r["\u0275\u0275sanitizeUrl"])}}function f(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nb-list",4),r["\u0275\u0275template"](1,u,6,1,"nb-list-item",5),r["\u0275\u0275template"](2,v,6,1,"nb-list-item",5),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.dialogData.vehicles_vehicle_name),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.dialogData.vehicles_vehicle_logo)}}function b(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",18),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).dialogData.vehicles_vehicle_phone=t})),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("ngModel",e.dialogData.vehicles_vehicle_phone)}}function y(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nb-option",21),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275property"]("value",e.phonecode),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.name+" "+e.phonecode)}}function _(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",6),r["\u0275\u0275elementStart"](1,"div",19),r["\u0275\u0275elementStart"](2,"nb-select",20),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).dialogData.selectedCountry=t})),r["\u0275\u0275elementStart"](3,"nb-option",21),r["\u0275\u0275text"](4,"Choose country"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](5,y,2,2,"nb-option",22),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",23),r["\u0275\u0275elementStart"](7,"input",24),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).dialogData.vehicles_vehicle_phone=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.dialogData.selectedCountry),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",""),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.tempCountries),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.dialogData.vehicles_vehicle_phone)}}function C(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",25),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).dialogData.vehicles_vehicle_email=t})),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("ngModel",e.dialogData.vehicles_vehicle_email)}}function w(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",26),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).dialogData.vehicles_vehicle_email=t})),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("ngModel",e.dialogData.vehicles_vehicle_email)}}function x(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-list-item",6),r["\u0275\u0275elementStart"](1,"div",7),r["\u0275\u0275elementStart"](2,"h6"),r["\u0275\u0275text"](3,"Company Password"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",8),r["\u0275\u0275elementStart"](5,"input",27),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).dialogData.vehicles_vehicle_password=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",e.dialogData.vehicles_vehicle_password)}}function S(e,t){if(1&e&&r["\u0275\u0275element"](0,"img",9),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("src",e.base_url+"uploads/companies/"+e.dialogData.vehicles_vehicle_logo,r["\u0275\u0275sanitizeUrl"])}}function E(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-list",4),r["\u0275\u0275elementStart"](1,"nb-list-item",6),r["\u0275\u0275elementStart"](2,"div",7),r["\u0275\u0275elementStart"](3,"h6"),r["\u0275\u0275text"](4,"Company Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",8),r["\u0275\u0275elementStart"](6,"input",10),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().dialogData.vehicles_vehicle_name=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"nb-list-item",6),r["\u0275\u0275elementStart"](8,"div",7),r["\u0275\u0275elementStart"](9,"h6"),r["\u0275\u0275text"](10,"Company Phone No"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",8),r["\u0275\u0275template"](12,b,1,1,"input",11),r["\u0275\u0275template"](13,_,8,4,"div",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"nb-list-item",6),r["\u0275\u0275elementStart"](15,"div",7),r["\u0275\u0275elementStart"](16,"h6"),r["\u0275\u0275text"](17,"Company Email"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",8),r["\u0275\u0275template"](19,C,1,1,"input",12),r["\u0275\u0275template"](20,w,1,1,"input",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](21,x,6,1,"nb-list-item",5),r["\u0275\u0275elementStart"](22,"nb-list-item",6),r["\u0275\u0275elementStart"](23,"div",7),r["\u0275\u0275elementStart"](24,"h6"),r["\u0275\u0275text"](25,"Company Address"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",8),r["\u0275\u0275elementStart"](27,"textarea",14),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().dialogData.vehicles_vehicle_address=t})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"nb-list-item",6),r["\u0275\u0275elementStart"](29,"div",7),r["\u0275\u0275elementStart"](30,"h6"),r["\u0275\u0275text"](31,"Image"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"div",8),r["\u0275\u0275template"](33,S,1,1,"img",15),r["\u0275\u0275element"](34,"br"),r["\u0275\u0275elementStart"](35,"label",16),r["\u0275\u0275text"](36,"Upload/Change Image"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"input",17),r["\u0275\u0275listener"]("change",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onFileChange(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](38,"br"),r["\u0275\u0275elementStart"](39,"label"),r["\u0275\u0275text"](40,"Image file should have dimension of 200 x 200px"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",e.dialogData.vehicles_vehicle_name),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf","edit"==e.dialogAction),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","add"==e.dialogAction),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf","add"==e.dialogAction),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","edit"==e.dialogAction),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","add"==e.dialogAction),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",e.dialogData.vehicles_vehicle_address),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",e.dialogData.vehicles_vehicle_logo)}}function I(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"nb-card-footer"),r["\u0275\u0275elementStart"](1,"div",28),r["\u0275\u0275elementStart"](2,"button",29),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().closeWindow()})),r["\u0275\u0275text"](3,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"button",30),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().submitFormResults()})),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",e.loading),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",e.loading),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"]("edit"==e.dialogAction?"Update":"Add")}}let D=(()=>{class e{constructor(e,t,n,i,o){this.windowRef=t,this.formService=n,this.common=i,this.web=o,this.base_url=d.a.base_url,this.loading=!1,this.fetchingStatus=!1,this.tempCountries=p,this.dialogData=e.data,this.dialogAction=e.action,this.dialogData.action=e.action}closeWindow(){this.windowRef.close()}firstLetterCapitalize(e){return e.split("").map((e,t)=>(0==t&&(e=e.toUpperCase()),e)).join("")}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){console.log(this.dialogData,"dialogdata"),this.tempCountries=this.tempCountries.default}))}onFileChange(e){e.target.files.length>0&&this.onSubmit(e.target.files)}onSubmit(e){let t=(new Date).valueOf();console.log(t);let n=e[0].name;n=n.substring(n.lastIndexOf(".")+1,n.length)||n;let i="EasyTravel_"+t.toString().substring(10)+e[0].name;const o=new FormData;o.append("image",e[0]),o.append("image",i),o.append("profile_image",i),console.log(i),this.loading=!0,this.web.uploadWebsitePicture(`${this.base_url}AppServer/upload_website_image.php?section=companies&filename=${i}`,o).subscribe(e=>{this.loading=!1,console.log(e),"200"==e.status?(this.common.presentToast(e.error,"Success"),this.dialogData.vehicles_vehicle_logo=i):this.common.presentToast(e.error,"Error")},e=>{this.loading=!1,this.common.presentToast("Connection Error","Error")})}submitFormResults(){return Object(a.a)(this,void 0,void 0,(function*(){let e=yield this.formService.companiesFormValidation(this.dialogData);console.log(e),e?("add"==this.dialogAction&&(this.dialogData.vehicles_vehicle_phone=(this.dialogData.selectedCountry||"")+this.dialogData.vehicles_vehicle_phone),console.log(this.dialogData),this.loading=!0,this.web.postData("addCompanies",this.dialogData).then(e=>{this.loading=!1,"200"==e.status?(this.common.presentToast(e.error,"Success"),this.closeWindow()):("add"==this.dialogAction&&(this.dialogData.vehicles_vehicle_phone=""),this.common.presentToast(e.error,"Failed"))},e=>{this.loading=!1,console.log(e,"Error"),this.common.presentToast("Connection Error","Failed")})):this.loading=!1}))}timeStamptoDate(e){return new Date(1e3*e)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.g),r["\u0275\u0275directiveInject"](l.wb),r["\u0275\u0275directiveInject"](c),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-companies-form"]],decls:7,vars:4,consts:[["accent","info"],["nbSpinnerStatus","danger",1,"window",3,"nbSpinner"],["class","dialog-list",4,"ngIf"],[4,"ngIf"],[1,"dialog-list"],["class","row",4,"ngIf"],[1,"row"],[1,"title","col-4"],[1,"content","col-8"],["alt","EasyTravel",3,"src"],["type","text","nbInput","","fullWidth","","status","basic","id","name","placeholder","Company Name",3,"ngModel","ngModelChange"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","+91 987654321",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","nbInput","","fullWidth","","status","basic","id","email","placeholder","Company Email",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","readonly","","nbInput","","fullWidth","","status","basic","id","email","placeholder","Company Email",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","nbInput","","fullWidth","","status","basic","id","address","placeholder","Company Address",3,"ngModel","ngModelChange"],["alt","EasyTravel",3,"src",4,"ngIf"],["for","image",1,"btn","btn-primary","mt-3","cursor-pointer"],["type","file","id","image","accept","image/jpeg",2,"visibility","hidden",3,"change"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","+91 987654321",3,"ngModel","ngModelChange"],[1,"col-5"],["fullWidth","","placeholder","Country code",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-7"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","987654321",3,"ngModel","ngModelChange"],["type","text","nbInput","","fullWidth","","status","basic","id","email","placeholder","Company Email",3,"ngModel","ngModelChange"],["type","text","readonly","","nbInput","","fullWidth","","status","basic","id","email","placeholder","Company Email",3,"ngModel","ngModelChange"],["type","password","nbInput","","fullWidth","","status","basic","placeholder","Password",3,"ngModel","ngModelChange"],[1,"mt-3"],["status","danger",1,"btn","btn-danger",3,"disabled","click"],["status","primary",1,"btn","btn-primary","ml-3",3,"disabled","click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"nb-card",0),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275text"](2," Company"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"nb-card-body",1),r["\u0275\u0275template"](4,f,3,2,"nb-list",2),r["\u0275\u0275template"](5,E,41,8,"nb-list",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,I,6,3,"nb-card-footer",3),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("nbSpinner",t.loading),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","view"==t.dialogAction),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","edit"==t.dialogAction||"add"==t.dialogAction),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf","view"!=t.dialogAction))},directives:[l.s,l.u,l.r,l.kb,i.NgIf,l.R,l.S,l.I,g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,l.fb,l.Y,i.NgForOf,l.t],styles:["nb-list-item .title h6{font-weight:600;margin:unset}nb-list-item .content pre{background:#efeaea;display:block}nb-card-body{max-height:80vh;overflow:scroll;min-width:700px}.max-height-100{max-height:100px}.color-unset{color:unset!important}.dialog-list{overflow:unset!important}.nb-theme-default nb-option-list{min-width:300px!important}"],encapsulation:2}),e})();class M{constructor(e={}){this.web_id=e.web_id||"",this.action=e.action||"",this.vehicles_vehicle_name=e.vehicles_vehicle_name||"",this.vehicles_vehicle_type=e.vehicles_vehicle_type||"",this.vehicles_vehicle_logo=e.vehicles_vehicle_logo||"",this.vehicles_serial_no=e.vehicles_serial_no||"",this.vehicles_vehicle_email=e.vehicles_vehicle_email||"",this.vehicles_vehicle_address=e.vehicles_vehicle_address||"",this.vehicles_vehicle_phone=e.vehicles_vehicle_phone||"",this.vehicles_vehicle_password=e.vehicles_vehicle_password||"",this.selectedCountry=e.selectedCountry||{}}}var F=n("RS3s");const T=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.windowService=e,this.web=t,this.common=n,this.router=i,this.base_url=d.a.base_url,this.tableSettings={attr:{class:"company-table"},add:{addButtonContent:'<i class="nb-plus"></i>'},edit:{editButtonContent:'<i class="fa fa-edit"></i>'},delete:{deleteButtonContent:'<i class="fa fa-trash"></i>'},actions:{columnTitle:"Actions",add:!0,edit:!1,delete:!1,custom:[{name:"viewrecord",title:'<i class="fa fa-eye"></i>'},{name:"editrecord",title:'<i class="fa fa-edit"></i>'},{name:"deleterecord",title:'<i class="fa fa-trash"></i>'}],position:"right"},sort:!0,mode:"external",pager:{perPage:15},columns:{vehicles_vehicle_name:{title:"Company Name",type:"string"},vehicles_vehicle_type:{title:"Vehicle Type",type:"string",valuePrepareFunction:e=>"Bus",filter:!1},vehicles_vehicle_logo:{title:"Company logo",type:"html",valuePrepareFunction:e=>'<img class="company-logo" src="'+this.base_url+"uploads/companies/"+e+'" alt="EasyTravel">',filter:!1},vehicles_count:{title:"Available Trips/day",type:"string",valuePrepareFunction:e=>0==e?"No Trips":1==e?"1 trip":e+" trips",filter:!1}}}}ngOnInit(){this.getPageData()}onCustomAction(e){console.log(e);let t=e.action;"editrecord"==t&&this.editRow(e),"viewrecord"==t&&this.selectRow(e),"deleterecord"==t&&this.deleteRow(e)}selectRow(e){this.common.setCompanyDetails(e.data),this.router.navigate(["/pages/companies/vehicles",e.data.web_id])}createRow(){this.windowService.open(D,{title:"Add Company",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:new M,action:"add"},windowClass:"formWindow"}).onClose.pipe().subscribe(e=>{console.log(e),this.ngOnInit()})}editRow(e){this.windowService.open(D,{title:"Edit Company",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:e.data,action:"edit"},windowClass:"formWindow"}).onClose.pipe().subscribe(e=>{console.log(e),this.ngOnInit()})}deleteRow(e){console.log(e),window.confirm("Are you sure you want to delete the company, this causes delete all the routes under this..?")&&(this.loading=!0,this.web.postData("deleteCompany",{web_id:e.data.web_id}).then(e=>{this.loading=!1,"200"==e.status?(this.common.presentToast(e.error,"Success"),this.ngOnInit()):this.common.presentToast(e.error,"Warning")},e=>{this.loading=!1,this.common.presentToast("Connection Error","Error")}))}getPageData(){this.loading=!0,this.web.getData("getCompanies").then(e=>{this.loading=!1,"200"==e.status?this.tableSource=e.data:this.common.presentToast(e.error,"Failed")},e=>{this.loading=!1,this.common.presentToast("Connection Error","Failed")})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.xb),r["\u0275\u0275directiveInject"](m.a),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](o.c))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-companies"]],decls:5,vars:4,consts:[[3,"nbSpinner","nbSpinnerMessage"],[3,"settings","source","userRowSelect","custom","create","edit","delete"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"nb-card"),r["\u0275\u0275elementStart"](1,"nb-card-header"),r["\u0275\u0275text"](2," Manage Companies "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"nb-card-body",0),r["\u0275\u0275elementStart"](4,"ng2-smart-table",1),r["\u0275\u0275listener"]("userRowSelect",(function(e){return t.selectRow(e)}))("custom",(function(e){return t.onCustomAction(e)}))("create",(function(){return t.createRow()}))("edit",(function(e){return t.editRow(e)}))("delete",(function(e){return t.deleteRow(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("nbSpinner",t.loading)("nbSpinnerMessage","Fetching company details"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("settings",t.tableSettings)("source",t.tableSource))},directives:[l.s,l.u,l.r,l.kb,F.a],styles:[".formWindow{min-width:unset}.times{color:red;font-size:1.5rem}.check,.times{width:100%;text-align:center;cursor:pointer}.check{font-size:1.2rem;color:green}.nb-theme-default ng2-smart-table .ng2-smart-actions a.ng2-smart-action{font-size:1.3rem!important}.company-table ng2-st-tbody-edit-delete{display:none!important}.company-table ng2-st-tbody-custom{display:flex;justify-content:space-evenly}.company-table .company-logo{max-width:160px}"],encapsulation:2}),e})()},{path:"vehicles/:company",loadChildren:()=>n.e(10).then(n.bind(null,"iipK")).then(e=>e.VehiclesModule)}];let A=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.g.forChild(T)],o.g]}),e})(),V=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[c],imports:[[i.CommonModule,A,l.v,l.T,l.J,g.FormsModule,F.b,l.q,l.sb,l.vb.forChild(),l.lb,l.gb]]}),e})()}}]);