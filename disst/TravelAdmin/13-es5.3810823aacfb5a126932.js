!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{xMYf:function(t,i,a){"use strict";a.r(i),a.d(i,"CompaniesModule",(function(){return N}));var o,l=a("ofXK"),r=a("tyNb"),s=a("mrSG"),c=a("aceb"),d=a("sAl5"),m=a("fXoL"),u=((o=function(){function t(n){e(this,t),this.common=n,this.formData={}}return n(t,[{key:"setFormData",value:function(e){this.formData=e,console.log(this.getFormData())}},{key:"getFormData",value:function(){return this.formData}},{key:"companiesFormValidation",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(e.selectedCountry||"")+e.vehicles_vehicle_phone,console.log(n),null!=e.vehicles_vehicle_name&&""!=e.vehicles_vehicle_name){t.next=6;break}t.t0=(this.common.presentToast("Enter company name","Field is missing"),!1),t.next=33;break;case 6:if(null!=e.vehicles_vehicle_email&&""!=e.vehicles_vehicle_email){t.next=10;break}t.t1=(this.common.presentToast("Enter company email","Field is missing"),!1),t.next=32;break;case 10:return t.next=12,this.common.validateEmail(e.vehicles_vehicle_email);case 12:if(t.t2=t.sent,0!=t.t2){t.next=17;break}t.t3=(this.common.presentToast("Enter valid email address","Invalid address"),!1),t.next=31;break;case 17:if(null!=n&&""!=n){t.next=21;break}t.t4=(this.common.presentToast("Enter phone number","Field is missing"),!1),t.next=30;break;case 21:return t.next=23,this.common.validateMobileNumber(n);case 23:if(t.t5=t.sent,0!=t.t5){t.next=28;break}t.t6=(this.common.presentToast("Enter valid phone number","Invalid number"),!1),t.next=29;break;case 28:t.t6=""==e.vehicles_vehicle_password||null==e.vehicles_vehicle_password?(this.common.presentToast("Please enter password","Field is missing"),!1):e.vehicles_vehicle_password.length<6?(this.common.presentToast("Password should have 6 or more characters."),!1):null!=e.vehicles_vehicle_logo&&""!=e.vehicles_vehicle_logo||(this.common.presentToast("Choose company logo","Field is missing"),!1);case 29:t.t4=t.t6;case 30:t.t3=t.t4;case 31:t.t1=t.t3;case 32:t.t0=t.t1;case 33:return t.abrupt("return",t.t0);case 34:case"end":return t.stop()}}),t,this)})))}}]),t}()).\u0275fac=function(e){return new(e||o)(m["\u0275\u0275inject"](d.a))},o.\u0275prov=m["\u0275\u0275defineInjectable"]({token:o,factory:o.\u0275fac,providedIn:"root"}),o),p=a("AytR"),h=a("PFrW"),g=a("Kyvb"),v=a.t(g,2),f=a("3Pt+");function b(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-list-item",6),m["\u0275\u0275elementStart"](1,"div",7),m["\u0275\u0275elementStart"](2,"h6"),m["\u0275\u0275text"](3,"Company Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",8),m["\u0275\u0275text"](5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate1"](" ",n.dialogData.vehicles_vehicle_name," ")}}function y(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-list-item",6),m["\u0275\u0275elementStart"](1,"div",7),m["\u0275\u0275elementStart"](2,"h6"),m["\u0275\u0275text"](3,"Image"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",8),m["\u0275\u0275element"](5,"img",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("src",n.base_url+"uploads/companies/"+n.dialogData.vehicles_vehicle_logo,m["\u0275\u0275sanitizeUrl"])}}function _(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-list",4),m["\u0275\u0275template"](1,b,6,1,"nb-list-item",5),m["\u0275\u0275template"](2,y,6,1,"nb-list-item",5),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.dialogData.vehicles_vehicle_name),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.dialogData.vehicles_vehicle_logo)}}function w(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"input",18),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).dialogData.vehicles_vehicle_phone=e})),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("ngModel",i.dialogData.vehicles_vehicle_phone)}}function C(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"nb-option",21),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.phonecode),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](n.name+" "+n.phonecode)}}function x(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",6),m["\u0275\u0275elementStart"](1,"div",19),m["\u0275\u0275elementStart"](2,"nb-select",20),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).dialogData.selectedCountry=e})),m["\u0275\u0275elementStart"](3,"nb-option",21),m["\u0275\u0275text"](4,"Choose country"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](5,C,2,2,"nb-option",22),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",23),m["\u0275\u0275elementStart"](7,"input",24),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).dialogData.vehicles_vehicle_phone=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",i.dialogData.selectedCountry),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("value",""),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",i.tempCountries),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",i.dialogData.vehicles_vehicle_phone)}}function S(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"input",25),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).dialogData.vehicles_vehicle_email=e})),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("ngModel",i.dialogData.vehicles_vehicle_email)}}function E(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"input",26),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).dialogData.vehicles_vehicle_email=e})),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("ngModel",i.dialogData.vehicles_vehicle_email)}}function I(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-list-item",6),m["\u0275\u0275elementStart"](1,"div",7),m["\u0275\u0275elementStart"](2,"h6"),m["\u0275\u0275text"](3,"Company Password"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",8),m["\u0275\u0275elementStart"](5,"input",27),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).dialogData.vehicles_vehicle_password=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",i.dialogData.vehicles_vehicle_password)}}function k(e,t){if(1&e&&m["\u0275\u0275element"](0,"img",9),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("src",n.base_url+"uploads/companies/"+n.dialogData.vehicles_vehicle_logo,m["\u0275\u0275sanitizeUrl"])}}function D(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-list",4),m["\u0275\u0275elementStart"](1,"nb-list-item",6),m["\u0275\u0275elementStart"](2,"div",7),m["\u0275\u0275elementStart"](3,"h6"),m["\u0275\u0275text"](4,"Company Name"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"div",8),m["\u0275\u0275elementStart"](6,"input",10),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().dialogData.vehicles_vehicle_name=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"nb-list-item",6),m["\u0275\u0275elementStart"](8,"div",7),m["\u0275\u0275elementStart"](9,"h6"),m["\u0275\u0275text"](10,"Company Phone No"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",8),m["\u0275\u0275template"](12,w,1,1,"input",11),m["\u0275\u0275template"](13,x,8,4,"div",5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"nb-list-item",6),m["\u0275\u0275elementStart"](15,"div",7),m["\u0275\u0275elementStart"](16,"h6"),m["\u0275\u0275text"](17,"Company Email"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",8),m["\u0275\u0275template"](19,S,1,1,"input",12),m["\u0275\u0275template"](20,E,1,1,"input",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](21,I,6,1,"nb-list-item",5),m["\u0275\u0275elementStart"](22,"nb-list-item",6),m["\u0275\u0275elementStart"](23,"div",7),m["\u0275\u0275elementStart"](24,"h6"),m["\u0275\u0275text"](25,"Company Address"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"div",8),m["\u0275\u0275elementStart"](27,"textarea",14),m["\u0275\u0275listener"]("ngModelChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().dialogData.vehicles_vehicle_address=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"nb-list-item",6),m["\u0275\u0275elementStart"](29,"div",7),m["\u0275\u0275elementStart"](30,"h6"),m["\u0275\u0275text"](31,"Image"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](32,"div",8),m["\u0275\u0275template"](33,k,1,1,"img",15),m["\u0275\u0275element"](34,"br"),m["\u0275\u0275elementStart"](35,"label",16),m["\u0275\u0275text"](36,"Upload/Change Image"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](37,"input",17),m["\u0275\u0275listener"]("change",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().onFileChange(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](38,"br"),m["\u0275\u0275elementStart"](39,"label"),m["\u0275\u0275text"](40,"Image file should have dimension of 200 x 200px"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",i.dialogData.vehicles_vehicle_name),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf","edit"==i.dialogAction),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","add"==i.dialogAction),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf","add"==i.dialogAction),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","edit"==i.dialogAction),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","add"==i.dialogAction),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",i.dialogData.vehicles_vehicle_address),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngIf",i.dialogData.vehicles_vehicle_logo)}}function M(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"nb-card-footer"),m["\u0275\u0275elementStart"](1,"div",28),m["\u0275\u0275elementStart"](2,"button",29),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().closeWindow()})),m["\u0275\u0275text"](3,"Cancel"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"button",30),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().submitFormResults()})),m["\u0275\u0275text"](5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("disabled",i.loading),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("disabled",i.loading),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"]("edit"==i.dialogAction?"Update":"Add")}}var F,T,A,R,V=((F=function(){function t(n,i,a,o,l){e(this,t),this.windowRef=i,this.formService=a,this.common=o,this.web=l,this.base_url=p.a.base_url,this.loading=!1,this.fetchingStatus=!1,this.tempCountries=v,this.dialogData=n.data,this.dialogAction=n.action,this.dialogData.action=n.action}return n(t,[{key:"closeWindow",value:function(){this.windowRef.close()}},{key:"firstLetterCapitalize",value:function(e){return e.split("").map((function(e,t){return 0==t&&(e=e.toUpperCase()),e})).join("")}},{key:"ngOnInit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.dialogData,"dialogdata"),this.tempCountries=this.tempCountries.default;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onFileChange",value:function(e){e.target.files.length>0&&this.onSubmit(e.target.files)}},{key:"onSubmit",value:function(e){var t=this,n=(new Date).valueOf();console.log(n);var i=e[0].name;i=i.substring(i.lastIndexOf(".")+1,i.length)||i;var a="EasyTravel_"+n.toString().substring(10)+e[0].name,o=new FormData;o.append("image",e[0]),o.append("image",a),o.append("profile_image",a),console.log(a),this.loading=!0,this.web.uploadWebsitePicture("".concat(this.base_url,"AppServer/upload_website_image.php?section=companies&filename=").concat(a),o).subscribe((function(e){t.loading=!1,console.log(e),"200"==e.status?(t.common.presentToast(e.error,"Success"),t.dialogData.vehicles_vehicle_logo=a):t.common.presentToast(e.error,"Error")}),(function(e){t.loading=!1,t.common.presentToast("Connection Error","Error")}))}},{key:"submitFormResults",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.formService.companiesFormValidation(this.dialogData);case 2:t=e.sent,console.log(t),t?("add"==this.dialogAction&&(this.dialogData.vehicles_vehicle_phone=(this.dialogData.selectedCountry||"")+this.dialogData.vehicles_vehicle_phone),console.log(this.dialogData),this.loading=!0,this.web.postData("addCompanies",this.dialogData).then((function(e){n.loading=!1,"200"==e.status?(n.common.presentToast(e.error,"Success"),n.closeWindow()):("add"==n.dialogAction&&(n.dialogData.vehicles_vehicle_phone=""),n.common.presentToast(e.error,"Failed"))}),(function(e){n.loading=!1,console.log(e,"Error"),n.common.presentToast("Connection Error","Failed")}))):this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"timeStamptoDate",value:function(e){return new Date(1e3*e)}}]),t}()).\u0275fac=function(e){return new(e||F)(m["\u0275\u0275directiveInject"](c.g),m["\u0275\u0275directiveInject"](c.wb),m["\u0275\u0275directiveInject"](u),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](h.a))},F.\u0275cmp=m["\u0275\u0275defineComponent"]({type:F,selectors:[["ngx-companies-form"]],decls:7,vars:4,consts:[["accent","info"],["nbSpinnerStatus","danger",1,"window",3,"nbSpinner"],["class","dialog-list",4,"ngIf"],[4,"ngIf"],[1,"dialog-list"],["class","row",4,"ngIf"],[1,"row"],[1,"title","col-4"],[1,"content","col-8"],["alt","EasyTravel",3,"src"],["type","text","nbInput","","fullWidth","","status","basic","id","name","placeholder","Company Name",3,"ngModel","ngModelChange"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","+91 987654321",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","nbInput","","fullWidth","","status","basic","id","email","placeholder","Company Email",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","readonly","","nbInput","","fullWidth","","status","basic","id","email","placeholder","Company Email",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","nbInput","","fullWidth","","status","basic","id","address","placeholder","Company Address",3,"ngModel","ngModelChange"],["alt","EasyTravel",3,"src",4,"ngIf"],["for","image",1,"btn","btn-primary","mt-3","cursor-pointer"],["type","file","id","image","accept","image/jpeg",2,"visibility","hidden",3,"change"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","+91 987654321",3,"ngModel","ngModelChange"],[1,"col-5"],["fullWidth","","placeholder","Country code",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-7"],["type","text","nbInput","","fullWidth","","status","basic","placeholder","987654321",3,"ngModel","ngModelChange"],["type","text","nbInput","","fullWidth","","status","basic","id","email","placeholder","Company Email",3,"ngModel","ngModelChange"],["type","text","readonly","","nbInput","","fullWidth","","status","basic","id","email","placeholder","Company Email",3,"ngModel","ngModelChange"],["type","password","nbInput","","fullWidth","","status","basic","placeholder","Password",3,"ngModel","ngModelChange"],[1,"mt-3"],["status","danger",1,"btn","btn-danger",3,"disabled","click"],["status","primary",1,"btn","btn-primary","ml-3",3,"disabled","click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card",0),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275text"](2," Company"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"nb-card-body",1),m["\u0275\u0275template"](4,_,3,2,"nb-list",2),m["\u0275\u0275template"](5,D,41,8,"nb-list",2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](6,M,6,3,"nb-card-footer",3),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("nbSpinner",t.loading),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","view"==t.dialogAction),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","edit"==t.dialogAction||"add"==t.dialogAction),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","view"!=t.dialogAction))},directives:[c.s,c.u,c.r,c.kb,l.NgIf,c.R,c.S,c.I,f.DefaultValueAccessor,f.NgControlStatus,f.NgModel,c.fb,c.Y,l.NgForOf,c.t],styles:["nb-list-item .title h6{font-weight:600;margin:unset}nb-list-item .content pre{background:#efeaea;display:block}nb-card-body{max-height:80vh;overflow:scroll;min-width:700px}.max-height-100{max-height:100px}.color-unset{color:unset!important}.dialog-list{overflow:unset!important}.nb-theme-default nb-option-list{min-width:300px!important}"],encapsulation:2}),F),j=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.web_id=n.web_id||"",this.action=n.action||"",this.vehicles_vehicle_name=n.vehicles_vehicle_name||"",this.vehicles_vehicle_type=n.vehicles_vehicle_type||"",this.vehicles_vehicle_logo=n.vehicles_vehicle_logo||"",this.vehicles_serial_no=n.vehicles_serial_no||"",this.vehicles_vehicle_email=n.vehicles_vehicle_email||"",this.vehicles_vehicle_address=n.vehicles_vehicle_address||"",this.vehicles_vehicle_phone=n.vehicles_vehicle_phone||"",this.vehicles_vehicle_password=n.vehicles_vehicle_password||"",this.selectedCountry=n.selectedCountry||{}},W=a("RS3s"),O=[{path:"",component:(T=function(){function t(n,i,a,o){var l=this;e(this,t),this.windowService=n,this.web=i,this.common=a,this.router=o,this.base_url=p.a.base_url,this.tableSettings={attr:{class:"company-table"},add:{addButtonContent:'<i class="nb-plus"></i>'},edit:{editButtonContent:'<i class="fa fa-edit"></i>'},delete:{deleteButtonContent:'<i class="fa fa-trash"></i>'},actions:{columnTitle:"Actions",add:!0,edit:!1,delete:!1,custom:[{name:"viewrecord",title:'<i class="fa fa-eye"></i>'},{name:"editrecord",title:'<i class="fa fa-edit"></i>'},{name:"deleterecord",title:'<i class="fa fa-trash"></i>'}],position:"right"},sort:!0,mode:"external",pager:{perPage:15},columns:{vehicles_vehicle_name:{title:"Company Name",type:"string"},vehicles_vehicle_type:{title:"Vehicle Type",type:"string",valuePrepareFunction:function(e){return"Bus"},filter:!1},vehicles_vehicle_logo:{title:"Company logo",type:"html",valuePrepareFunction:function(e){return'<img class="company-logo" src="'+l.base_url+"uploads/companies/"+e+'" alt="EasyTravel">'},filter:!1},vehicles_count:{title:"Available Trips/day",type:"string",valuePrepareFunction:function(e){return 0==e?"No Trips":1==e?"1 trip":e+" trips"},filter:!1}}}}return n(t,[{key:"ngOnInit",value:function(){this.getPageData()}},{key:"onCustomAction",value:function(e){console.log(e);var t=e.action;"editrecord"==t&&this.editRow(e),"viewrecord"==t&&this.selectRow(e),"deleterecord"==t&&this.deleteRow(e)}},{key:"selectRow",value:function(e){this.common.setCompanyDetails(e.data),this.router.navigate(["/pages/companies/vehicles",e.data.web_id])}},{key:"createRow",value:function(){var e=this;this.windowService.open(V,{title:"Add Company",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:new j,action:"add"},windowClass:"formWindow"}).onClose.pipe().subscribe((function(t){console.log(t),e.ngOnInit()}))}},{key:"editRow",value:function(e){var t=this;this.windowService.open(V,{title:"Edit Company",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:e.data,action:"edit"},windowClass:"formWindow"}).onClose.pipe().subscribe((function(e){console.log(e),t.ngOnInit()}))}},{key:"deleteRow",value:function(e){var t=this;console.log(e),window.confirm("Are you sure you want to delete the company, this causes delete all the routes under this..?")&&(this.loading=!0,this.web.postData("deleteCompany",{web_id:e.data.web_id}).then((function(e){t.loading=!1,"200"==e.status?(t.common.presentToast(e.error,"Success"),t.ngOnInit()):t.common.presentToast(e.error,"Warning")}),(function(e){t.loading=!1,t.common.presentToast("Connection Error","Error")})))}},{key:"getPageData",value:function(){var e=this;this.loading=!0,this.web.getData("getCompanies").then((function(t){e.loading=!1,"200"==t.status?e.tableSource=t.data:e.common.presentToast(t.error,"Failed")}),(function(t){e.loading=!1,e.common.presentToast("Connection Error","Failed")}))}}]),t}(),T.\u0275fac=function(e){return new(e||T)(m["\u0275\u0275directiveInject"](c.xb),m["\u0275\u0275directiveInject"](h.a),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](r.c))},T.\u0275cmp=m["\u0275\u0275defineComponent"]({type:T,selectors:[["ngx-companies"]],decls:5,vars:4,consts:[[3,"nbSpinner","nbSpinnerMessage"],[3,"settings","source","userRowSelect","custom","create","edit","delete"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"nb-card"),m["\u0275\u0275elementStart"](1,"nb-card-header"),m["\u0275\u0275text"](2," Manage Companies "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"nb-card-body",0),m["\u0275\u0275elementStart"](4,"ng2-smart-table",1),m["\u0275\u0275listener"]("userRowSelect",(function(e){return t.selectRow(e)}))("custom",(function(e){return t.onCustomAction(e)}))("create",(function(){return t.createRow()}))("edit",(function(e){return t.editRow(e)}))("delete",(function(e){return t.deleteRow(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("nbSpinner",t.loading)("nbSpinnerMessage","Fetching company details"),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("settings",t.tableSettings)("source",t.tableSource))},directives:[c.s,c.u,c.r,c.kb,W.a],styles:[".formWindow{min-width:unset}.times{color:red;font-size:1.5rem}.check,.times{width:100%;text-align:center;cursor:pointer}.check{font-size:1.2rem;color:green}.nb-theme-default ng2-smart-table .ng2-smart-actions a.ng2-smart-action{font-size:1.3rem!important}.company-table ng2-st-tbody-edit-delete{display:none!important}.company-table ng2-st-tbody-custom{display:flex;justify-content:space-evenly}.company-table .company-logo{max-width:160px}"],encapsulation:2}),T)},{path:"vehicles/:company",loadChildren:function(){return a.e(10).then(a.bind(null,"iipK")).then((function(e){return e.VehiclesModule}))}}],P=((R=function t(){e(this,t)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:R}),R.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||R)},imports:[[r.g.forChild(O)],r.g]}),R),N=((A=function t(){e(this,t)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:A}),A.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||A)},providers:[u],imports:[[l.CommonModule,P,c.v,c.T,c.J,f.FormsModule,W.b,c.q,c.sb,c.vb.forChild(),c.lb,c.gb]]}),A)}}])}();