(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"97jD":function(t,e,n){"use strict";n.r(e),n.d(e,"WebsitesModule",(function(){return k}));var o=n("ofXK"),i=n("tyNb"),a=n("mrSG"),r=n("aceb"),s=n("sAl5"),c=n("fXoL");let l=(()=>{class t{constructor(t){this.common=t,this.formData={}}setFormData(t){this.formData=t,console.log(this.getFormData())}getFormData(){return this.formData}websitesFormValidation(t){return Object(a.a)(this,void 0,void 0,(function*(){return!0}))}}return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275inject"](s.a))},t.\u0275prov=c["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=n("AytR"),m=n("PFrW"),p=(n("YHT8"),n("lb/0"),n("3Pt+")),g=n("9A7S");function u(t,e){if(1&t&&(c["\u0275\u0275elementStart"](0,"nb-list-item",7),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275elementStart"](2,"h6"),c["\u0275\u0275text"](3,"Content"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"div",9),c["\u0275\u0275elementEnd"]()),2&t){const t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("innerHTML",t.dialogData.section_content,c["\u0275\u0275sanitizeHtml"])}}function f(t,e){if(1&t&&(c["\u0275\u0275elementStart"](0,"nb-list-item",7),c["\u0275\u0275elementStart"](1,"div",8),c["\u0275\u0275elementStart"](2,"h6"),c["\u0275\u0275text"](3,"Content - FR"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"div",9),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&t){const t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("innerHTML",t.dialogData.section_content_fr,c["\u0275\u0275sanitizeHtml"]),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",t.dialogData.section_content_fr," ")}}function h(t,e){if(1&t&&(c["\u0275\u0275elementStart"](0,"nb-list",5),c["\u0275\u0275template"](1,u,5,1,"nb-list-item",6),c["\u0275\u0275template"](2,f,6,2,"nb-list-item",6),c["\u0275\u0275elementEnd"]()),2&t){const t=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.dialogData.section_content),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.dialogData.section_content_fr)}}function b(t,e){if(1&t){const t=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"input",16),c["\u0275\u0275listener"]("ngModelChange",(function(e){return c["\u0275\u0275restoreView"](t),c["\u0275\u0275nextContext"](2).dialogData.section_content=e})),c["\u0275\u0275elementEnd"]()}if(2&t){const t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("ngModel",t.dialogData.section_content)}}const w=function(){return{extraPlugins:"divarea",height:"320"}};function _(t,e){if(1&t){const t=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ckeditor",17),c["\u0275\u0275listener"]("ngModelChange",(function(e){return c["\u0275\u0275restoreView"](t),c["\u0275\u0275nextContext"](2).dialogData.section_content=e})),c["\u0275\u0275elementEnd"]()}if(2&t){const t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("config",c["\u0275\u0275pureFunction0"](2,w))("ngModel",t.dialogData.section_content)}}function C(t,e){if(1&t){const t=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"input",18),c["\u0275\u0275listener"]("ngModelChange",(function(e){return c["\u0275\u0275restoreView"](t),c["\u0275\u0275nextContext"](2).dialogData.section_content_fr=e})),c["\u0275\u0275elementEnd"]()}if(2&t){const t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("ngModel",t.dialogData.section_content_fr)}}function v(t,e){if(1&t){const t=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ckeditor",19),c["\u0275\u0275listener"]("ngModelChange",(function(e){return c["\u0275\u0275restoreView"](t),c["\u0275\u0275nextContext"](2).dialogData.section_content_fr=e})),c["\u0275\u0275elementEnd"]()}if(2&t){const t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("config",c["\u0275\u0275pureFunction0"](2,w))("ngModel",t.dialogData.section_content_fr)}}function x(t,e){if(1&t&&(c["\u0275\u0275elementStart"](0,"nb-list",10),c["\u0275\u0275elementStart"](1,"nb-list-item",7),c["\u0275\u0275elementStart"](2,"div",8),c["\u0275\u0275elementStart"](3,"h6"),c["\u0275\u0275text"](4,"Content"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"div",11),c["\u0275\u0275template"](6,b,1,1,"input",12),c["\u0275\u0275template"](7,_,1,3,"ckeditor",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"nb-list-item",7),c["\u0275\u0275elementStart"](9,"div",8),c["\u0275\u0275elementStart"](10,"h6"),c["\u0275\u0275text"](11,"Content - FR"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"div",11),c["\u0275\u0275template"](13,C,1,1,"input",14),c["\u0275\u0275template"](14,v,1,3,"ckeditor",15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&t){const t=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf",!t.dialogData.section_need_editor),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.dialogData.section_need_editor),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf",!t.dialogData.section_need_editor),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.dialogData.section_need_editor)}}function S(t,e){if(1&t){const t=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"nb-card-footer"),c["\u0275\u0275elementStart"](1,"div",20),c["\u0275\u0275elementStart"](2,"button",21),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](t),c["\u0275\u0275nextContext"]().closeWindow()})),c["\u0275\u0275text"](3,"Cancel"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"button",22),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](t),c["\u0275\u0275nextContext"]().submitFormResults()})),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&t){const t=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",t.loading),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"]("edit"==t.dialogAction?"Update":"Add")}}let y=(()=>{class t{constructor(t,e,n,o,i){this.windowRef=e,this.formService=n,this.common=o,this.web=i,this.base_url=d.a.base_url,this.loading=!1,this.dialogData=t.data,this.dialogAction=t.action,this.dialogData.action=t.action}closeWindow(){this.windowRef.close()}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){console.log(this.dialogData)}))}pageNameTranslator(t){return t.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}submitFormResults(){return Object(a.a)(this,void 0,void 0,(function*(){""==this.dialogData.section_content||null==this.dialogData.section_content?(this.common.presentToast("Contents can not be empty","Error"),document.getElementById("section_content").focus()):""==this.dialogData.section_content_fr||null==this.dialogData.section_content_fr?(this.common.presentToast("Contents can not be empty","Error"),document.getElementById("section_content_fr").focus()):(this.loading=!0,this.web.postData("websiteContentUpdate",this.dialogData).then(t=>{this.loading=!1,"200"==t.status?(this.closeWindow(),this.common.presentToast(t.error,"Success")):this.common.presentToast(t.error,"Error")},t=>{this.loading=!1,console.log(t,"Error"),this.common.presentToast("Connection Error.","Error")}))}))}}return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](r.g),c["\u0275\u0275directiveInject"](r.wb),c["\u0275\u0275directiveInject"](l),c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](m.a))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-websites-form"]],decls:7,vars:6,consts:[["accent","info"],["nbSpinnerStatus","danger",3,"nbSpinner"],["class","dialog-list",4,"ngIf"],["class","dialog-list website",4,"ngIf"],[4,"ngIf"],[1,"dialog-list"],["class","row",4,"ngIf"],[1,"row"],[1,"title","col-4"],[1,"content","col-8",3,"innerHTML"],[1,"dialog-list","website"],[1,"content","col-8"],["type","text","id","section_content","nbInput","","fullWidth","","status","basic","placeholder","Content",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","id","section_content","placeholder","Content",3,"config","ngModel","ngModelChange",4,"ngIf"],["type","text","id","section_content_fr","nbInput","","fullWidth","","status","basic","placeholder","Content",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","id","section_content_fr","placeholder","Content",3,"config","ngModel","ngModelChange",4,"ngIf"],["type","text","id","section_content","nbInput","","fullWidth","","status","basic","placeholder","Content",3,"ngModel","ngModelChange"],["type","text","id","section_content","placeholder","Content",3,"config","ngModel","ngModelChange"],["type","text","id","section_content_fr","nbInput","","fullWidth","","status","basic","placeholder","Content",3,"ngModel","ngModelChange"],["type","text","id","section_content_fr","placeholder","Content",3,"config","ngModel","ngModelChange"],[1,"mt-3"],["status","danger",1,"btn","btn-danger",3,"disabled","click"],["status","primary",1,"btn","btn-primary","ml-3",3,"disabled","click"]],template:function(t,e){1&t&&(c["\u0275\u0275elementStart"](0,"nb-card",0),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"nb-card-body",1),c["\u0275\u0275template"](4,h,3,2,"nb-list",2),c["\u0275\u0275template"](5,x,15,4,"nb-list",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](6,S,6,3,"nb-card-footer",4),c["\u0275\u0275elementEnd"]()),2&t&&(c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate2"](" ",e.pageNameTranslator(e.dialogData.page_name)," -> ",e.pageNameTranslator(e.dialogData.section_name)," -> "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("nbSpinner",e.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","view"==e.dialogAction),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","edit"==e.dialogAction||"add"==e.dialogAction),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","view"!=e.dialogAction))},directives:[r.s,r.u,r.r,r.kb,o.NgIf,r.R,r.S,r.I,p.DefaultValueAccessor,p.NgControlStatus,p.NgModel,g.CKEditorComponent,r.t],styles:["nb-list-item .title h6{font-weight:600;margin:unset}nb-list-item .website .title{margin-top:10px}nb-list-item .content pre{background:#efeaea;display:block}nb-card-body{max-height:80vh;overflow:scroll;min-width:700px}.pdf-icon{font-size:3rem;background:#efeaea;padding:30px}.max-height-100{max-height:100px}.color-unset{color:unset!important}.dialog-list{overflow:unset!important}.heading-trip{min-width:100%;display:block;color:#0095ff;margin-bottom:23px;font-size:25px;background:#f1f1f1;padding:10px;border-top:2px solid}.nb-theme-default nb-option-list{min-width:300px!important}.website nb-list-item{align-items:end}"],encapsulation:2}),t})();class E{constructor(t={}){this.page_name=t.page_name||"",this.action=t.action||"",this.section_name=t.section_name||"",this.section_title=t.section_title||"",this.section_content=t.section_content||"",this.section_content_fr=t.section_content_fr||"",this.section_need_editor=t.section_need_editor||""}}var I=n("RS3s");const D=[{path:":page",component:(()=>{class t{constructor(t,e,n,o){this.windowService=t,this.web=e,this.common=n,this.activeRoute=o,this.base_url=d.a.base_url,this.tableSettings={add:{addButtonContent:'<i class="nb-plus"></i>'},edit:{editButtonContent:'<i class="fa fa-edit"></i>'},delete:{deleteButtonContent:'<i class="fa fa-trash"></i>'},actions:{columnTitle:"Actions",add:!1,edit:!0,delete:!1,position:"right"},sort:!0,mode:"external",pager:{perPage:15},columns:{section_name:{title:"Section Position",type:"string",valuePrepareFunction:t=>t.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")},section_title:{title:"Section name",type:"string",valuePrepareFunction:t=>t.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")},section_content:{title:"Content",type:"html",valuePrepareFunction:t=>t.length>100?t.substring(0,100)+" ...":t}}}}ngOnInit(){this.activeRoute.paramMap.subscribe(t=>{console.log(t),t.has("page")&&(this.getPageData(t.params.page),this.pageNameCalculator(t.params.page))})}createRow(){this.windowService.open(y,{title:"Add Website",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:new E,action:"add"},windowClass:"formWindow"}).onClose.pipe().subscribe(t=>{console.log(t),this.ngOnInit()})}deleteRow(t){console.log(t),window.confirm("Are you sure you want to delete?")&&this.web.postData("websiteDelete",t.data).then(t=>{"200"==t.status?(this.common.presentToast(t.error,"Success"),this.ngOnInit()):this.common.presentToast(t.error,"Failed")},t=>{this.common.presentToast("Connection Error")})}editRow(t){this.windowService.open(y,{title:"Edit Websites",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:t.data,action:"edit"},windowClass:"formWindow"}).onClose.pipe().subscribe(t=>{console.log(t),this.ngOnInit()})}getPageData(t){this.web.getData("getWebsites?page="+t).then(t=>{"200"==t.status?this.mappingTableData(t.data):this.common.presentToast(t.error,"Error")},t=>{this.common.presentToast("Connection Error","Error")})}mappingTableData(t){this.tableSource=t,this.tableSourceTemp=JSON.parse(JSON.stringify(t)),this.tableSource.map(t=>t)}pageNameCalculator(t){console.log(t),this.pageName="home"==t?"Home":"trains"==t?"Traings":"flights"==t?"Flights":"parcels"==t?"Parcels":"your_bookings"==t?"Your Bookings":"who_we_are"==t?"Who We Are":"terms"==t?"Terms of use":"become_a_partner"==t?"Become a partner":"Privacy policy"}selectRow(t){this.windowService.open(y,{title:"View Content",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:t.data,action:"view"},windowClass:"formWindow"}).onClose.pipe().subscribe(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](r.xb),c["\u0275\u0275directiveInject"](m.a),c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-websites"]],decls:5,vars:3,consts:[[3,"settings","source","userRowSelect","edit","delete"]],template:function(t,e){1&t&&(c["\u0275\u0275elementStart"](0,"nb-card"),c["\u0275\u0275elementStart"](1,"nb-card-header"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"nb-card-body"),c["\u0275\u0275elementStart"](4,"ng2-smart-table",0),c["\u0275\u0275listener"]("userRowSelect",(function(t){return e.selectRow(t)}))("edit",(function(t){return e.editRow(t)}))("delete",(function(t){return e.deleteRow(t)})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&t&&(c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" Manage Contents - ",e.pageName," "),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("settings",e.tableSettings)("source",e.tableSource))},directives:[r.s,r.u,r.r,I.a],styles:[".times{color:red}.check,.times{width:100%;text-align:center;font-size:1.5rem;cursor:pointer}.check{color:green}.nb-theme-default ng2-smart-table .ng2-smart-actions a.ng2-smart-action{font-size:1.3rem!important}"],encapsulation:2}),t})()}];let M=(()=>{class t{}return t.\u0275mod=c["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[i.g.forChild(D)],i.g]}),t})(),k=(()=>{class t{}return t.\u0275mod=c["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[l,o.DatePipe],imports:[[o.CommonModule,M,r.v,r.T,r.J,p.FormsModule,I.b,r.q,r.vb.forChild(),r.lb,r.gb,r.l,g.CKEditorModule]]}),t})()},YHT8:function(t,e){window.CKEDITOR_BASEPATH="//cdn.ckeditor.com/4.6.2/full-all/"}}]);