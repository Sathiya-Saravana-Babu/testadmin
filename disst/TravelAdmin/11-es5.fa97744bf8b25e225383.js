!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"97jD":function(t,o,i){"use strict";i.r(o),i.d(o,"WebsitesModule",(function(){return N}));var a,r=i("ofXK"),c=i("tyNb"),s=i("mrSG"),l=i("aceb"),d=i("sAl5"),u=i("fXoL"),p=((a=function(){function t(n){e(this,t),this.common=n,this.formData={}}return n(t,[{key:"setFormData",value:function(e){this.formData=e,console.log(this.getFormData())}},{key:"getFormData",value:function(){return this.formData}},{key:"websitesFormValidation",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))}}]),t}()).\u0275fac=function(e){return new(e||a)(u["\u0275\u0275inject"](d.a))},a.\u0275prov=u["\u0275\u0275defineInjectable"]({token:a,factory:a.\u0275fac,providedIn:"root"}),a),m=i("AytR"),g=i("PFrW"),f=(i("YHT8"),i("lb/0"),i("3Pt+")),h=i("9A7S");function b(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-list-item",7),u["\u0275\u0275elementStart"](1,"div",8),u["\u0275\u0275elementStart"](2,"h6"),u["\u0275\u0275text"](3,"Content"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](4,"div",9),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("innerHTML",n.dialogData.section_content,u["\u0275\u0275sanitizeHtml"])}}function v(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-list-item",7),u["\u0275\u0275elementStart"](1,"div",8),u["\u0275\u0275elementStart"](2,"h6"),u["\u0275\u0275text"](3,"Content - FR"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"div",9),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("innerHTML",n.dialogData.section_content_fr,u["\u0275\u0275sanitizeHtml"]),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n.dialogData.section_content_fr," ")}}function w(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-list",5),u["\u0275\u0275template"](1,b,5,1,"nb-list-item",6),u["\u0275\u0275template"](2,v,6,2,"nb-list-item",6),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.dialogData.section_content),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.dialogData.section_content_fr)}}function _(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"input",16),u["\u0275\u0275listener"]("ngModelChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).dialogData.section_content=e})),u["\u0275\u0275elementEnd"]()}if(2&e){var o=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("ngModel",o.dialogData.section_content)}}var C=function(){return{extraPlugins:"divarea",height:"320"}};function y(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ckeditor",17),u["\u0275\u0275listener"]("ngModelChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).dialogData.section_content=e})),u["\u0275\u0275elementEnd"]()}if(2&e){var o=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("config",u["\u0275\u0275pureFunction0"](2,C))("ngModel",o.dialogData.section_content)}}function x(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"input",18),u["\u0275\u0275listener"]("ngModelChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).dialogData.section_content_fr=e})),u["\u0275\u0275elementEnd"]()}if(2&e){var o=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("ngModel",o.dialogData.section_content_fr)}}function S(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ckeditor",19),u["\u0275\u0275listener"]("ngModelChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).dialogData.section_content_fr=e})),u["\u0275\u0275elementEnd"]()}if(2&e){var o=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("config",u["\u0275\u0275pureFunction0"](2,C))("ngModel",o.dialogData.section_content_fr)}}function k(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-list",10),u["\u0275\u0275elementStart"](1,"nb-list-item",7),u["\u0275\u0275elementStart"](2,"div",8),u["\u0275\u0275elementStart"](3,"h6"),u["\u0275\u0275text"](4,"Content"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",11),u["\u0275\u0275template"](6,_,1,1,"input",12),u["\u0275\u0275template"](7,y,1,3,"ckeditor",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"nb-list-item",7),u["\u0275\u0275elementStart"](9,"div",8),u["\u0275\u0275elementStart"](10,"h6"),u["\u0275\u0275text"](11,"Content - FR"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"div",11),u["\u0275\u0275template"](13,x,1,1,"input",14),u["\u0275\u0275template"](14,S,1,3,"ckeditor",15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",!n.dialogData.section_need_editor),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.dialogData.section_need_editor),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngIf",!n.dialogData.section_need_editor),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.dialogData.section_need_editor)}}function E(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-card-footer"),u["\u0275\u0275elementStart"](1,"div",20),u["\u0275\u0275elementStart"](2,"button",21),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().closeWindow()})),u["\u0275\u0275text"](3,"Cancel"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"button",22),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().submitFormResults()})),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var o=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",o.loading),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",o.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"]("edit"==o.dialogAction?"Update":"Add")}}var I,D,M,T,R=((I=function(){function t(n,o,i,a,r){e(this,t),this.windowRef=o,this.formService=i,this.common=a,this.web=r,this.base_url=m.a.base_url,this.loading=!1,this.dialogData=n.data,this.dialogAction=n.action,this.dialogData.action=n.action}return n(t,[{key:"closeWindow",value:function(){this.windowRef.close()}},{key:"ngOnInit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.dialogData);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"pageNameTranslator",value:function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}},{key:"submitFormResults",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""==this.dialogData.section_content||null==this.dialogData.section_content?(this.common.presentToast("Contents can not be empty","Error"),document.getElementById("section_content").focus()):""==this.dialogData.section_content_fr||null==this.dialogData.section_content_fr?(this.common.presentToast("Contents can not be empty","Error"),document.getElementById("section_content_fr").focus()):(this.loading=!0,this.web.postData("websiteContentUpdate",this.dialogData).then((function(e){t.loading=!1,"200"==e.status?(t.closeWindow(),t.common.presentToast(e.error,"Success")):t.common.presentToast(e.error,"Error")}),(function(e){t.loading=!1,console.log(e,"Error"),t.common.presentToast("Connection Error.","Error")})));case 1:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(e){return new(e||I)(u["\u0275\u0275directiveInject"](l.g),u["\u0275\u0275directiveInject"](l.wb),u["\u0275\u0275directiveInject"](p),u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](g.a))},I.\u0275cmp=u["\u0275\u0275defineComponent"]({type:I,selectors:[["ngx-websites-form"]],decls:7,vars:6,consts:[["accent","info"],["nbSpinnerStatus","danger",3,"nbSpinner"],["class","dialog-list",4,"ngIf"],["class","dialog-list website",4,"ngIf"],[4,"ngIf"],[1,"dialog-list"],["class","row",4,"ngIf"],[1,"row"],[1,"title","col-4"],[1,"content","col-8",3,"innerHTML"],[1,"dialog-list","website"],[1,"content","col-8"],["type","text","id","section_content","nbInput","","fullWidth","","status","basic","placeholder","Content",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","id","section_content","placeholder","Content",3,"config","ngModel","ngModelChange",4,"ngIf"],["type","text","id","section_content_fr","nbInput","","fullWidth","","status","basic","placeholder","Content",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","id","section_content_fr","placeholder","Content",3,"config","ngModel","ngModelChange",4,"ngIf"],["type","text","id","section_content","nbInput","","fullWidth","","status","basic","placeholder","Content",3,"ngModel","ngModelChange"],["type","text","id","section_content","placeholder","Content",3,"config","ngModel","ngModelChange"],["type","text","id","section_content_fr","nbInput","","fullWidth","","status","basic","placeholder","Content",3,"ngModel","ngModelChange"],["type","text","id","section_content_fr","placeholder","Content",3,"config","ngModel","ngModelChange"],[1,"mt-3"],["status","danger",1,"btn","btn-danger",3,"disabled","click"],["status","primary",1,"btn","btn-primary","ml-3",3,"disabled","click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card",0),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"nb-card-body",1),u["\u0275\u0275template"](4,w,3,2,"nb-list",2),u["\u0275\u0275template"](5,k,15,4,"nb-list",3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](6,E,6,3,"nb-card-footer",4),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" ",t.pageNameTranslator(t.dialogData.page_name)," -> ",t.pageNameTranslator(t.dialogData.section_name)," -> "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("nbSpinner",t.loading),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","view"==t.dialogAction),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","edit"==t.dialogAction||"add"==t.dialogAction),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","view"!=t.dialogAction))},directives:[l.s,l.u,l.r,l.kb,r.NgIf,l.R,l.S,l.I,f.DefaultValueAccessor,f.NgControlStatus,f.NgModel,h.CKEditorComponent,l.t],styles:["nb-list-item .title h6{font-weight:600;margin:unset}nb-list-item .website .title{margin-top:10px}nb-list-item .content pre{background:#efeaea;display:block}nb-card-body{max-height:80vh;overflow:scroll;min-width:700px}.pdf-icon{font-size:3rem;background:#efeaea;padding:30px}.max-height-100{max-height:100px}.color-unset{color:unset!important}.dialog-list{overflow:unset!important}.heading-trip{min-width:100%;display:block;color:#0095ff;margin-bottom:23px;font-size:25px;background:#f1f1f1;padding:10px;border-top:2px solid}.nb-theme-default nb-option-list{min-width:300px!important}.website nb-list-item{align-items:end}"],encapsulation:2}),I),j=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.page_name=n.page_name||"",this.action=n.action||"",this.section_name=n.section_name||"",this.section_title=n.section_title||"",this.section_content=n.section_content||"",this.section_content_fr=n.section_content_fr||"",this.section_need_editor=n.section_need_editor||""},A=i("RS3s"),F=[{path:":page",component:(D=function(){function t(n,o,i,a){e(this,t),this.windowService=n,this.web=o,this.common=i,this.activeRoute=a,this.base_url=m.a.base_url,this.tableSettings={add:{addButtonContent:'<i class="nb-plus"></i>'},edit:{editButtonContent:'<i class="fa fa-edit"></i>'},delete:{deleteButtonContent:'<i class="fa fa-trash"></i>'},actions:{columnTitle:"Actions",add:!1,edit:!0,delete:!1,position:"right"},sort:!0,mode:"external",pager:{perPage:15},columns:{section_name:{title:"Section Position",type:"string",valuePrepareFunction:function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}},section_title:{title:"Section name",type:"string",valuePrepareFunction:function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}},section_content:{title:"Content",type:"html",valuePrepareFunction:function(e){return e.length>100?e.substring(0,100)+" ...":e}}}}}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.activeRoute.paramMap.subscribe((function(t){console.log(t),t.has("page")&&(e.getPageData(t.params.page),e.pageNameCalculator(t.params.page))}))}},{key:"createRow",value:function(){var e=this;this.windowService.open(R,{title:"Add Website",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:new j,action:"add"},windowClass:"formWindow"}).onClose.pipe().subscribe((function(t){console.log(t),e.ngOnInit()}))}},{key:"deleteRow",value:function(e){var t=this;console.log(e),window.confirm("Are you sure you want to delete?")&&this.web.postData("websiteDelete",e.data).then((function(e){"200"==e.status?(t.common.presentToast(e.error,"Success"),t.ngOnInit()):t.common.presentToast(e.error,"Failed")}),(function(e){t.common.presentToast("Connection Error")}))}},{key:"editRow",value:function(e){var t=this;this.windowService.open(R,{title:"Edit Websites",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:e.data,action:"edit"},windowClass:"formWindow"}).onClose.pipe().subscribe((function(e){console.log(e),t.ngOnInit()}))}},{key:"getPageData",value:function(e){var t=this;this.web.getData("getWebsites?page="+e).then((function(e){"200"==e.status?t.mappingTableData(e.data):t.common.presentToast(e.error,"Error")}),(function(e){t.common.presentToast("Connection Error","Error")}))}},{key:"mappingTableData",value:function(e){this.tableSource=e,this.tableSourceTemp=JSON.parse(JSON.stringify(e)),this.tableSource.map((function(e){return e}))}},{key:"pageNameCalculator",value:function(e){console.log(e),this.pageName="home"==e?"Home":"trains"==e?"Traings":"flights"==e?"Flights":"parcels"==e?"Parcels":"your_bookings"==e?"Your Bookings":"who_we_are"==e?"Who We Are":"terms"==e?"Terms of use":"become_a_partner"==e?"Become a partner":"Privacy policy"}},{key:"selectRow",value:function(e){this.windowService.open(R,{title:"View Content",hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:e.data,action:"view"},windowClass:"formWindow"}).onClose.pipe().subscribe((function(e){console.log(e)}))}}]),t}(),D.\u0275fac=function(e){return new(e||D)(u["\u0275\u0275directiveInject"](l.xb),u["\u0275\u0275directiveInject"](g.a),u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](c.a))},D.\u0275cmp=u["\u0275\u0275defineComponent"]({type:D,selectors:[["ngx-websites"]],decls:5,vars:3,consts:[[3,"settings","source","userRowSelect","edit","delete"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"nb-card"),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"nb-card-body"),u["\u0275\u0275elementStart"](4,"ng2-smart-table",0),u["\u0275\u0275listener"]("userRowSelect",(function(e){return t.selectRow(e)}))("edit",(function(e){return t.editRow(e)}))("delete",(function(e){return t.deleteRow(e)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" Manage Contents - ",t.pageName," "),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("settings",t.tableSettings)("source",t.tableSource))},directives:[l.s,l.u,l.r,A.a],styles:[".times{color:red}.check,.times{width:100%;text-align:center;font-size:1.5rem;cursor:pointer}.check{color:green}.nb-theme-default ng2-smart-table .ng2-smart-actions a.ng2-smart-action{font-size:1.3rem!important}"],encapsulation:2}),D)}],W=((T=function t(){e(this,t)}).\u0275mod=u["\u0275\u0275defineNgModule"]({type:T}),T.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||T)},imports:[[c.g.forChild(F)],c.g]}),T),N=((M=function t(){e(this,t)}).\u0275mod=u["\u0275\u0275defineNgModule"]({type:M}),M.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||M)},providers:[p,r.DatePipe],imports:[[r.CommonModule,W,l.v,l.T,l.J,f.FormsModule,A.b,l.q,l.vb.forChild(),l.lb,l.gb,l.l,h.CKEditorModule]]}),M)},YHT8:function(e,t){window.CKEDITOR_BASEPATH="//cdn.ckeditor.com/4.6.2/full-all/"}}])}();